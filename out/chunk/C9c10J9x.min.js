import{i as e,n as t,t as n}from"../sxng-core.min.js";import"./13gvpunf.min.js";var r=0,i=0,a=async(r,a,o)=>{try{let s;s=e.method===`GET`?await n(`GET`,`./autocompleter?q=${encodeURIComponent(a)}`):await n(`POST`,`./autocompleter`,{body:new URLSearchParams({q:a})});let c=await s.json();if(o<=i)return;let l=document.querySelector(`.autocomplete`);if(!l)return;let u=document.querySelector(`.autocomplete ul`);if(!u)return;if(l.classList.add(`open`),u.replaceChildren(),c?.[1]?.length===0){let t=Object.assign(document.createElement(`li`),{className:`no-item-found`,textContent:e.translations?.no_item_found??`No results found`});u.append(t),i=o;return}let d=new DocumentFragment;for(let e of c[1]??[]){let n=Object.assign(document.createElement(`li`),{textContent:e});t(`mousedown`,n,()=>{r.value=e,document.querySelector(`#search`)?.submit(),l.classList.remove(`open`)}),d.append(n)}u.append(d),i=o}catch(e){console.error(`Error fetching autocomplete results:`,e)}},o=document.getElementById(`q`),s;o&&t(`input`,o,()=>{clearTimeout(s);let t=o.value,n=e.autocomplete_min??2;t.length<n||(s=window.setTimeout(async()=>{t===o.value&&await a(o,t,++r)},0))});var c=document.querySelector(`.autocomplete`),l=document.querySelector(`.autocomplete ul`);l&&o&&t(`keyup`,o,e=>{let t=[...l.children],n=t.findIndex(e=>e.classList.contains(`active`)),r=-1;switch(e.key){case`ArrowUp`:{let e=t[n];e&&n>=0&&e.classList.remove(`active`),r=(n-1+t.length)%t.length;break}case`ArrowDown`:{let e=t[n];e&&n>=0&&e.classList.remove(`active`),r=(n+1)%t.length;break}case`Tab`:case`Enter`:c&&c.classList.remove(`open`);break;default:break}if(r!==-1){let e=t[r];if(e&&(e.classList.add(`active`),!e.classList.contains(`no-item-found`))){let t=document.getElementById(`q`);t&&(t.value=e.textContent??``)}}});
//# sourceMappingURL=C9c10J9x.min.js.map